{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/my-command.js"],"names":["lineThickness","lineColor","lineThicknessInput","lineColorInput","context","selectedLayers","selection","selectedCount","count","document","showMessage","window","createWindow","alert","response","runModal","stringValue","firstLayer","parent","parentGroup","i","a","aFrame","frame","aMidX","x","width","aMidY","y","height","j","b","bFrame","bMidX","bMidY","line","drawLine","name","addLayers","MSLayerMovement","moveToBack","x1","y1","x2","y2","thickness","color","aName","bName","path","NSBezierPath","bezierPath","moveToPoint","NSMakePoint","lineToPoint","MSShapeGroup","shapeWithBezierPath","MSPath","pathWithBezierPath","setName","border","style","addStylePartOfType","MSImmutableColor","colorWithSVGString","COSAlertWindow","new","setMessageText","addButtonWithTitle","viewWidth","viewHeight","view","NSView","alloc","initWithFrame","NSMakeRect","NSTextField","lineThicknessLabel","lineColorLabel","setNextKeyView","setStringValue","setSelectable","setEditable","setBezeled","setDrawsBackground","addSubview","addAccessoryView"],"mappings":"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","file":"my-command.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/my-command.js\");\n","var lineThickness;\nvar lineColor;\nvar lineThicknessInput;\nvar lineColorInput;\n// var groupCheckbox;\n// var groupCheckboxInput;\n\nexport default function(context) {\n\n  var selectedLayers = context.selection;\n  const selectedCount = selectedLayers.count();\n\n  if (selectedCount < 2) {\n    context.document.showMessage('At least 2 layers need to be selected.');\n    return;\n  }\n\n  // Create window\n  var window = createWindow(context);\n  var alert = window[0];\n\n  var response = alert.runModal();\n\n  if (response != \"1000\") {\n    return;\n  }\n\n  // Get line information\n  lineThicknessInput = lineThickness.stringValue();\n  lineColorInput = lineColor.stringValue();\n  // groupCheckboxInput = groupCheckbox.stringValue();\n\n  var firstLayer = selectedLayers[0];\n  var parent = firstLayer.parentGroup();\n\n  //context.document.showMessage(selectedLayers[0].frame().x());\n  for (var i = 0; i < selectedCount; i++) {\n    var a = selectedLayers[i];\n    var aFrame = a.frame();\n    var aMidX = aFrame.x() + aFrame.width() * 0.5;\n    var aMidY = aFrame.y() + aFrame.height() * 0.5;\n    for (var j = i + 1; j < selectedCount; j++) {\n      var b = selectedLayers[j];\n      var bFrame = b.frame();\n      var bMidX = bFrame.x() + bFrame.width() * 0.5;\n      var bMidY = bFrame.y() + bFrame.height() * 0.5;\n      var line = drawLine(context, aMidX, aMidY, bMidX, bMidY, lineThicknessInput, lineColorInput, a.name(), b.name());\n      parent.addLayers([line]);\n      MSLayerMovement.moveToBack([line])\n    }\n  }\n\n}\n\nfunction drawLine(context, x1, y1, x2, y2, thickness, color, aName, bName) {\n\n  if (!thickness || !color) {\n    // Use default settings\n    thickness = 1;\n    color = \"#767676\";\n  }\n\n  var document = context.document;\n  var path = NSBezierPath.bezierPath();\n\n  path.moveToPoint(NSMakePoint(x1, y1));\n  path.lineToPoint(NSMakePoint(x2, y2));\n\n  var line = MSShapeGroup.shapeWithBezierPath(MSPath.pathWithBezierPath(path));\n  line.setName(aName + \"-\" + bName);\n  var border = line.style().addStylePartOfType(1);\n  border.color = MSImmutableColor.colorWithSVGString(color);\n  border.thickness = thickness;\n  // newBorder.color = MSImmutableColor.colorWithSVGString(color);\n  // newBorder.thickness = thickness;\n  //\n  return line;\n};\n\nfunction createWindow(context) {\n  // initVars(context);\n\n  var alert = COSAlertWindow.new();\n  alert.setMessageText(\"Configure Connecting Objects\")\n  // Creating dialog buttons\n  alert.addButtonWithTitle(\"Draw\");\n  alert.addButtonWithTitle(\"Cancel\");\n\n  // Creating the view\n  var viewWidth = 300;\n  var viewHeight = 70;\n\n  var view = NSView.alloc().initWithFrame(NSMakeRect(0, 0, viewWidth, viewHeight));\n\n  // Creating the inputs\n  lineThickness = NSTextField.alloc().initWithFrame(NSMakeRect(0, viewHeight - 40, 130, 20));\n  lineColor = NSTextField.alloc().initWithFrame(NSMakeRect(140, viewHeight - 40, 130, 20));\n\n  var lineThicknessLabel = NSTextField.alloc().initWithFrame(NSMakeRect(-1, viewHeight - 20, (viewWidth / 2) - 10, 20));\n  var lineColorLabel = NSTextField.alloc().initWithFrame(NSMakeRect(140, viewHeight - 20, (viewWidth / 2) - 10, 20));\n\n  // groupCheckbox = NSButton.alloc().initWithFrame(NSMakeRect(-1, viewHeight - 70, viewWidth - 10, 20));\n  //\n  // groupCheckbox.setButtonType(NSSwitchButton);\n  // groupCheckbox.setBezelStyle(0);\n  // groupCheckbox.setTitle(\"Group all generated lines.\");\n  // groupCheckbox.setState(NSOffState);\n\n  lineThickness.setNextKeyView(lineColor);\n\n  lineThicknessLabel.setStringValue(\"Line Thickness:\");\n  lineThicknessLabel.setSelectable(false);\n  lineThicknessLabel.setEditable(false);\n  lineThicknessLabel.setBezeled(false);\n  lineThicknessLabel.setDrawsBackground(false);\n\n  lineColorLabel.setStringValue(\"Line Color:\");\n  lineColorLabel.setSelectable(false);\n  lineColorLabel.setEditable(false);\n  lineColorLabel.setBezeled(false);\n  lineColorLabel.setDrawsBackground(false);\n\n  // Default values for textfield\n  lineThickness.setStringValue('1');\n  lineColor.setStringValue('#767676');\n\n  // Adding the textfield\n  view.addSubview(lineThickness);\n  view.addSubview(lineColor);\n\n  // Adding the label\n  view.addSubview(lineColorLabel);\n  view.addSubview(lineThicknessLabel);\n\n  // Add checkboxes\n  // view.addSubview(groupCheckbox);\n\n  alert.addAccessoryView(view);\n\n  // Show the dialog\n  return [alert];\n}\n"],"sourceRoot":""}